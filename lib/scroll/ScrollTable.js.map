{"version":3,"sources":["../../src/scroll/ScrollTable.js"],"names":["ScrollTable","props","startX","startY","endX","endY","transformX","transformY","vertical","isTouch","state","top_height","con_height","con_width","con_heights","con_widths","data","self","children","autoWidth","defaultWidth","setState","map","item","i","width","parseFloat","refs","headT","headC","conT","conC","Math","max","offsetHeight","conT_trs","getElementsByTagName","conC_trs","conC_tds","headC_trs","headC_tds","length","temp","push","offsetWidth","e","window","event","touch","targetTouches","pageX","pageY","touchStartTime","Date","_setTransition","preventDefault","angle","atan2","abs","PI","height","con","parseInt","_transformY","fixedWidth","document","documentElement","_transformX","touchEndTime","timeDif","more","x","style","transform","webkitTransform","y","val","transition","webkitTransition","col","sort","title","value","colspan","colName","cls","cols_width","sort_flag","j","_sort","bind","key","index","hasClass","addClass","removeClass","row","values","_renderFixedTitleCol","_cb","record","cb","hasOwnProperty","_renderConCol","headTStyle","lineHeight","_touchStart","_touchMove","_touchEnd","paddingLeft","_renderHeadTh","maxHeight","_renderFixedTitle","_renderCon","Column"],"mappings":"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","file":"ScrollTable.js","sourcesContent":["/**\r\n * @description 滑动table\r\n * ScrollTable title 头部左侧名称 fixed [] 头部左侧显示列 fixedWidth 左侧宽度  height 内容区高度 data [] 数据数组\r\n * Column title 列名 value 数据key width 列宽\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\n\r\nimport ClassCore from '../utils/ClassCore'\r\nimport {quickSortObj} from '../utils/quickSort'\r\n\r\nclass ScrollTable extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\t// this.cW = 0; \t\t\t\t//内容区宽度\r\n\t\t// this.cH = 0; \t\t\t\t//内容区高度\r\n\t\tthis.startX = 0; \t\t\t//touchstart X值\r\n\t\tthis.startY = 0; \t\t\t//touchstart Y值\r\n\t\tthis.endX = 0; \t\t\t\t//touchend X值\r\n\t\tthis.endY = 0;\t\t\t\t//touchend Y值\r\n\t\tthis.transformX = 0;\t\t//内容区X偏移量\r\n\t\tthis.transformY = 0;\t\t//内容区Y偏移量\r\n\t\tthis.vertical = 0;\t\t\t//是否垂直 默认0 垂直1 水平2\r\n\t\tthis.isTouch = false;\t\t//是否touch\r\n\t\tthis.state = {\r\n\t\t\ttop_height: 0,\t\t\t//头部高度\r\n\t\t\tcon_height: 0,\t\t\t//内容区高度\r\n\t\t\tcon_width: 0,\t\t\t//内容区宽度\r\n\t\t\tcon_heights: [],\t\t//内容区每行高度\r\n\t\t\tcon_widths: [],\t\t\t//内容区每列宽度\r\n\t\t\tdata: [],\r\n\t\t}\r\n\t}\r\n\t\r\n\t// 初始化前获取内容区总高宽\r\n\tcomponentWillMount() {\r\n\t\tlet self = this;\r\n\t\tlet {children, data, autoWidth, defaultWidth} = this.props;\r\n\r\n\t\tthis.setState({data: data})\r\n\t\tif(!autoWidth) {\r\n\t\t\tlet con_width = 0;\r\n\r\n\t\t\tchildren.map((item, i) => {\r\n\t\t\t\tlet {width} = item.props;\r\n\t\t\t\tcon_width += width ? parseFloat(width) : parseFloat(defaultWidth)\r\n\t\t\t})\r\n\r\n\t\t\tthis.setState({con_width: con_width});\r\n\t\t}\r\n\t}\r\n\r\n\t// 渲染完成后校准高宽\r\n\tcomponentDidMount() {\r\n\t\tlet {headT, headC, conT, conC} = this.refs;\r\n\r\n\t\tlet top_height = 0, con_height = 0, con_width = 0, \r\n\t\t\tcon_heights = [], con_widths = [];\r\n\r\n\t\ttop_height = Math.max(headT.offsetHeight, headC.offsetHeight);\r\n\r\n\t\tlet conT_trs = conT.getElementsByTagName(\"tr\"),\r\n\t\t\tconC_trs = conC.getElementsByTagName(\"tr\"),\r\n\t\t\tconC_tds = conC_trs[0].getElementsByTagName(\"td\"),\r\n\t\t\theadC_trs = headC.getElementsByTagName(\"tr\"),\r\n\t\t\theadC_tds = headC_trs[0].getElementsByTagName(\"th\");\r\n\r\n\t\tfor(let i = 0; i < conT_trs.length; i++) {\r\n\t\t\tlet temp = Math.max(conT_trs[i].offsetHeight, conC_trs[i].offsetHeight);\r\n\t\t\tcon_heights.push(temp);\r\n\t\t\tcon_height += temp;\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < conC_tds.length; i++) {\r\n\t\t\tlet temp = Math.max(conC_tds[i].offsetWidth, headC_tds[i].offsetWidth);\r\n\t\t\tcon_widths.push(temp);\r\n\t\t\tcon_width += temp;\r\n\t\t}\r\n\r\n\t\tthis.setState({top_height: top_height, con_height: con_height, con_width: con_width, con_heights: con_heights, con_widths: con_widths});\r\n\t}\r\n\r\n\r\n\t// touchstart\r\n\t// 获取 touchstart X,Y值，记录touchstarttime, 删除delay Class, 重置vertical\r\n\t_touchStart (e){\r\n\t\te = e?e:window.event; \r\n\t\tlet touch = e.targetTouches[0]; \r\n\t\tthis.startX = touch.pageX;\r\n\t\tthis.startY = touch.pageY;\r\n\r\n\r\n\t\tthis.touchStartTime = new Date();\r\n\r\n\t\tthis._setTransition(\"\");\r\n\t\t\r\n\r\n\t\t// const {headC, conT, conC} = this.refs;\r\n\t\t// ClassCore.removeClass(headC, 'scroll-delay');\r\n\t\t// ClassCore.removeClass(conT, 'scroll-delay');\r\n\t\t// ClassCore.removeClass(conC, 'scroll-delay');\r\n\r\n\t\tthis.vertical = 0;\r\n\t}\r\n\r\n\t// touchmove\r\n\t// 阻止默认事件，记录touchend X,Y值， 计算角度，获取是否是垂直scroll, 内容区scroll\r\n\t_touchMove (e){\r\n\t\te = e?e:window.event; \r\n\t\te.preventDefault();\r\n\t\tlet touch = e.targetTouches[0] \r\n\r\n\t\tthis.endY = touch.pageY - this.startY+ this.transformY;\r\n\t\tthis.endX = touch.pageX - this.startX + this.transformX;\r\n\r\n\t\tif(this.vertical == 0) {\r\n\t\t\tlet angle = Math.atan2(Math.abs(touch.pageY - this.startY), Math.abs(touch.pageX - this.startX)) * 180 / Math.PI;\r\n\t\t\tthis.vertical = angle > 45 ? 1 : 2;\r\n\t\t} else {\r\n\t\t\tlet max = 0;\r\n\t\t\tif(this.vertical == 1) {\r\n\t\t\t\tlet {height} = this.props;\r\n\t\t\t\tlet {con_height, top_height} = this.state;\r\n\t\t\t\theight = parseFloat(height) - top_height;\r\n\t\t\t\tlet {con} = this.refs;\r\n\t\t\t\tif(con.offsetHeight < height)\r\n\t\t\t\t\treturn false\r\n\t\t\t\tmax = -con_height + parseInt(height);\r\n\t\t\t\tthis.endX = this.transformX;\r\n\t\t\t\tif(this.endY > 0) {\r\n\t\t\t\t\tthis.endY = 0;\r\n\t\t\t\t} else if(this.endY < max) {\r\n\t\t\t\t\tthis.endY = max;\r\n\t\t\t\t}\r\n\t\t\t\tthis._transformY(this.endY);\r\n\t\t\t} else if(this.vertical == 2) {\r\n\t\t\t\tlet {con_width} = this.state;\r\n\t\t\t\tlet {fixedWidth} = this.props\r\n\t\t\t\tmax = -con_width + document.documentElement.offsetWidth - fixedWidth;\r\n\t\t\t\tthis.endY = this.transformY;\r\n\t\t\t\tif(this.endX > 0) {\r\n\t\t\t\t\tthis.endX = 0;\r\n\t\t\t\t} else if(this.endX < max) {\r\n\t\t\t\t\tthis.endX = max;\r\n\t\t\t\t}\r\n\t\t\t\tthis._transformX(this.endX);\r\n\t\t\t} \r\n\t\t}\r\n\t}\r\n\r\n\t// touchend\r\n\t// 获取touchengtime, 添加 delay class，判断时候有delay偏移，计算偏移X,Y\r\n\t_touchEnd (e){\r\n\t\tthis.touchEndTime = new Date();\r\n\t\tlet timeDif = this.touchEndTime - this.touchStartTime;\r\n\t\tlet more = 0;\r\n\r\n\t\t// const {headC, conT, conC} = this.refs;\r\n\t\t// ClassCore.addClass(headC, 'scroll-delay');\r\n\t\t// ClassCore.addClass(conT, 'scroll-delay');\r\n\t\t// ClassCore.addClass(conC, 'scroll-delay');\r\n\r\n\t\tif(timeDif < 300 && this.vertical != 0) {\r\n\t\t\tif(this.vertical == 1) {\r\n\t\t\t\tlet {con_height, top_height} = this.state;\r\n\t\t\t\tlet {height} = this.props;\r\n\t\t\t\theight = parseFloat(height) - top_height;\r\n\t\t\t\tlet {con} = this.refs;\r\n\t\t\t\tif(con.offsetHeight < height)\r\n\t\t\t\t\treturn false\r\n\t\t\t\tmore = (300 - timeDif) / 50 * (this.endY - this.transformY);\r\n\t\t\t\tthis.endY = this.endY + more;\r\n\t\t\t\tif(this.endY > 0) {\r\n\t\t\t\t\tthis.endY = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.endY < -con_height + parseInt(height)) {\r\n\t\t\t\t\tthis.endY = -con_height + parseInt(height)\r\n\t\t\t\t}\r\n\t\t\t\tif(Math.abs(more) > 500) {\r\n\t\t\t\t\tthis._setTransition(\"transform 0.5s ease-out 0s\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._setTransition(\"transform 0.2s ease-out 0s\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet {con_width} = this.state;\r\n\t\t\t\tlet {fixedWidth} = this.props\r\n\t\t\t\tmore = (300 -timeDif) / 50 * (this.endX - this.transformX);\r\n\t\t\t\tthis.endX = this.endX + more;\r\n\t\t\t\tif(this.endX > 0) {\r\n\t\t\t\t\tthis.endX = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.endX < -con_width + document.documentElement.offsetWidth - fixedWidth) {\r\n\t\t\t\t\tthis.endX = -con_width + document.documentElement.offsetWidth - fixedWidth\r\n\t\t\t\t}\r\n\t\t\t\tif(Math.abs(more) > 500) {\r\n\t\t\t\t\tthis._setTransition(\"transform 0.5s ease-out 0s\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._setTransition(\"transform 0.2s ease-out 0s\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(this.vertical == 1) {\r\n\t\t\t\tlet {top_height} = this.state;\r\n\t\t\t\tlet {height} = this.props;\r\n\t\t\t\theight = parseFloat(height) - top_height;\r\n\t\t\t\tlet {con} = this.refs;\r\n\t\t\t\tif(con.offsetHeight < height)\r\n\t\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.vertical == 1) {\r\n\t\t\tthis.transformY = this.endY;\r\n\t\t\tthis._transformY(this.endY);\r\n\t\t} else {\r\n\t\t\tthis.transformX = this.endX;\r\n\t\t\tthis._transformX(this.endX);\r\n\t\t}\r\n\t}\r\n\r\n\t// X 偏移\r\n\t_transformX(x) {\r\n\t\tconst {headC, conT, conC} = this.refs;\r\n\t\theadC.style.transform = \"translate3d(\" + x + \"px,\" + 0 + \"px,0)\";\r\n\t\tconT.style.transform = \"translate3d(0,\" + this.transformY + \"px,0)\";\r\n\t\tconC.style.transform = \"translate3d(\" + x + \"px,\" + this.transformY + \"px,0)\";\r\n\t\theadC.style.webkitTransform = \"translate3d(\" + x + \"px,\" + 0 + \"px,0)\";\r\n\t\tconT.style.webkitTransform = \"translate3d(0,\" + this.transformY + \"px,0)\";\r\n\t\tconC.style.webkitTransform = \"translate3d(\" + x + \"px,\" + this.transformY + \"px,0)\";\r\n\t}\r\n\r\n\t// Y 偏移\r\n\t_transformY(y) {\r\n\t\tconst {headC, conT, conC} = this.refs;\r\n\t\theadC.style.transform = \"translate3d(\" + this.transformX + \"px,0,0)\";\r\n\t\tconT.style.transform = \"translate3d(\" + 0 + \"px,\" + y + \"px,0)\";\r\n\t\tconC.style.transform = \"translate3d(\" + this.transformX + \"px,\" + y + \"px,0)\";\r\n\t\theadC.style.webkitTransform = \"translate3d(\" + this.transformX + \"px,0,0)\";\r\n\t\tconT.style.webkitTransform = \"translate3d(\" + 0 + \"px,\" + y + \"px,0)\";\r\n\t\tconC.style.webkitTransform = \"translate3d(\" + this.transformX + \"px,\" + y + \"px,0)\";\r\n\t}\r\n\r\n\t_setTransition(val) {\r\n\t\tconst {headC, conT, conC} = this.refs;\r\n\t\theadC.style.transition = val;\r\n\t\tconT.style.transition = val;\r\n\t\tconC.style.transition = val;\r\n\t\theadC.style.webkitTransition = \"-webkit-\" + val;\r\n\t\tconT.style.webkitTransition = \"-webkit-\" + val;\r\n\t\tconC.style.webkitTransition = \"-webkit-\" + val;\r\n\t}\r\n\r\n\r\n\t// headT\r\n\t_renderHeadTh(col, i) {\r\n\t\tlet {autoWidth, defaultWidth, sort} = this.props;\r\n\t\tlet {title, value, width, children, colspan, colName} = col.props;\r\n\t\tlet {top_height, con_widths} = this.state;\r\n\t\tlet cls = \"column\";\r\n\t\tlet cols_width = con_widths[i];\r\n\t\tlet sort_flag = sort;\r\n\t\tif(colspan && colspan > 1) {\r\n\t\t\tfor(let j = 1; j < colspan; j++) {\r\n\t\t\t\tcols_width += con_widths[i + j];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(autoWidth) {\r\n\t\t\treturn (\r\n\t\t\t\t<th key={i} className={cls} style={{height: top_height, width: con_widths[i]}} onClick={sort_flag ? this._sort.bind(this, value, i) : null}>\r\n\t\t\t\t\t{colName ? <p className=\"cols\" style={{width: cols_width}}>{colName}</p> : null}\r\n\t\t\t\t\t{children ? children : title}\r\n\t\t\t\t</th>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<th key={i} className={cls} style={{height: top_height, width: width ? width : defaultWidth}} onClick={sort_flag ? this._sort.bind(this, value, i) : null}>\r\n\t\t\t\t\t{colName ? <p className=\"cols\" style={{width: cols_width}}>{colName}</p> : null}\r\n\t\t\t\t\t{children ? children : title}\r\n\t\t\t\t</th>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\t_sort(key, index) {\r\n\t\t// let {sortHandle} = this.props;\r\n\t\tconst {headC, conC} = this.refs;\r\n\t\tlet {data, con_heights} = this.state\r\n\t\tlet conC_trs = conC.getElementsByTagName(\"tr\"),\r\n\t\t\theadC_trs = headC.getElementsByTagName(\"tr\"),\r\n\t\t\theadC_tds = headC_trs[0].getElementsByTagName(\"th\");\r\n\t\tif(ClassCore.hasClass(headC_tds[index], 'active')) return false;\r\n\t\tfor(let i = 0; i < headC_tds.length; i++) {\r\n\t\t\tif(index == i) {\r\n\t\t\t\tClassCore.addClass(headC_tds[i], 'active');\r\n\t\t\t} else {\r\n\t\t\t\tClassCore.removeClass(headC_tds[i], 'active');\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(let i = 0; i < conC_trs.length; i++) {\r\n\t\t\tlet conC_tds = conC_trs[i].getElementsByTagName(\"td\");\r\n\t\t\tfor(let j = 0; j < conC_tds.length; j++) {\r\n\t\t\t\tif(index == j) {\r\n\t\t\t\t\tClassCore.addClass(conC_tds[j], 'active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tClassCore.removeClass(conC_tds[j], 'active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(let i = 0; i < con_heights.length; i++) {\r\n\t\t\tdata[i].height = con_heights[i];\r\n\t\t}\r\n\t\tdata = quickSortObj(data, key);\r\n\t\tfor(let i = 0; i < con_heights.length; i++) {\r\n\t\t\tcon_heights[i] = data[i].height;\r\n\t\t}\r\n\t\tthis.setState({data: data, con_heights: con_heights});\r\n\t}\r\n\r\n\t// conT\r\n\t_renderFixedTitle(row, i) {\r\n\t\tlet {values} = this.props;\r\n\t\tlet data = [];\r\n\t\tvalues.map((item) => {\r\n\t\t\tdata.push(row[item]);\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<tr key={i}>\r\n\t\t\t\t{data.map((col) => {\r\n\t\t\t\t\treturn this._renderFixedTitleCol(col, i, row)\r\n\t\t\t\t})}\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\t// conT内容\r\n\t_renderFixedTitleCol(col, i, row) {\r\n\t\tlet {con_heights} = this.state;\r\n\t\treturn (\r\n\t\t\t<td key={i} className=\"break-wrap\" onClick={this._cb.bind(this, row)} style={{height: con_heights[i]}}>{col}</td>\r\n\t\t)\r\n\t}\r\n\r\n\t_cb (record, e) {\r\n\t\tthis.props.cb(record);\r\n\t}\r\n\r\n\t// conC\r\n\t_renderCon(row, i) {\r\n\t\tlet {children, autoWidth, defaultWidth} = this.props;\r\n\t\tlet data = [];\r\n\t\tchildren.map((item) => {\r\n\t\t\tlet temp = {value: \"\"};\r\n\t\t\ttemp.width = item.props.width ? parseInt(item.props.width) : defaultWidth;\r\n\t\t\tif(row.hasOwnProperty(item.props.value)) {\r\n\t\t\t\ttemp.value = row[item.props.value]\r\n\t\t\t}\r\n\t\t\tdata.push(temp)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<tr key={i}>\r\n\t\t\t\t{data.map((col, j) => {\r\n\t\t\t\t\treturn this._renderConCol(col, j, i)\r\n\t\t\t\t})}\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\t// conC内容\r\n\t_renderConCol(col, i, j) {\r\n\t\tlet {autoWidth} = this.props;\r\n\t\tlet {con_heights, con_widths} = this.state;\r\n\t\tif(autoWidth) {\r\n\t\t\treturn (\r\n\t\t\t\t<td key={i} style={{height: con_heights[j], width: con_widths[i]}}>{col.value}</td>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<td key={i} style={{height: con_heights[j], width: col.width}}>{col.value}</td>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet {title, children, fixedWidth, height, autoWidth} = this.props;\r\n\t\tlet {top_height, con_height, con_width, data} = this.state;\r\n\t\theight = parseFloat(height) - top_height;\r\n\t\tlet headTStyle = {\r\n\t\t\twidth: fixedWidth\r\n\t\t};\r\n\t\tif(top_height > 0) {\r\n\t\t\theadTStyle.height = top_height;\r\n\t\t\theadTStyle.lineHeight = top_height + \"px\";\r\n\t\t}\r\n\t\tlet cls = autoWidth ? \"scroll-table no-wrap\" : \"scroll-table\";\r\n\t\treturn (\r\n\t\t\t<div className={cls} ref=\"scroll\" onTouchStart={this._touchStart.bind(this)} onTouchMove={this._touchMove.bind(this)} onTouchEnd={this._touchEnd.bind(this)} >\r\n\t\t\t\t<div className=\"head\">\r\n\t\t\t\t\t<div className=\"fixed-name\" ref=\"headT\" style={headTStyle}>{title}</div>\r\n\t\t\t\t\t<div className=\"panel\"style={{paddingLeft: fixedWidth}}>\r\n\t\t\t\t\t\t<table className=\"columns\" ref=\"headC\" style={{width: con_width}}>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t{children.map((col, i) => {\r\n\t\t\t\t\t\t\t\t\t\treturn this._renderHeadTh(col, i);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"content\" ref=\"con\" style={{maxHeight: height}}>\r\n\t\t\t\t\t<table className=\"fixed-title\" ref=\"conT\" style={{width: fixedWidth}}>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{data.map((row, i) => {\r\n\t\t\t\t\t\t\t\treturn this._renderFixedTitle(row, i);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t\t<div className=\"panel\" style={{paddingLeft: fixedWidth}}>\r\n\t\t\t\t\t\t<table className=\"con\" ref=\"conC\" style={{width: con_width}}>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{data.map((row, i) => {\r\n\t\t\t\t\t\t\t\t\treturn this._renderCon(row, i);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nclass Column extends Component {}\r\n\r\n\r\nexport {ScrollTable, Column}"]}