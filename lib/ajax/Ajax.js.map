{"version":3,"sources":["../../src/ajax/Ajax.js"],"names":["get","url","success","error","before","complete","type","beforeSend","res","err","alert","post","data","fs_ajax","login_url","cb","arguments","length","JSON","stringify","result","errorcode","location","href","exports"],"mappings":"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","file":"Ajax.js","sourcesContent":["/**\r\n * @description ajax封装\r\n * @create date 2016-05-18\r\n * @author \r\n */\r\nimport Ajax from './Ajax.js';\r\n\r\n\r\nlet get = function(url, success, error, before, complete) {\r\n\tAjax({\r\n\t\turl: url,\r\n\t\ttype: 'get',\r\n\t\tbeforeSend: function() {\r\n\t\t\tbefore();\r\n\t\t},\r\n\t\tcomplete: function() {\r\n\t\t\tcomplete();\r\n\t\t},\r\n\t\tsuccess: function(res) {\r\n\t\t\tsuccess(res);\r\n\t\t},\r\n\t\terror: function(err) {\r\n\t\t\talert(err);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nlet post = function(url, data, success, error, before, complete) {\r\n\tAjax({\r\n\t\turl: url,\r\n\t\tdata: data,\r\n\t\tbeforeSend: function() {\r\n\t\t\tbefore();\r\n\t\t},\r\n\t\tcomplete: function() {\r\n\t\t\tcomplete();\r\n\t\t},\r\n\t\tsuccess: function(res) {\r\n\t\t\tsuccess(res);\r\n\t\t},\r\n\t\terror: function(err) {\r\n\t\t\talert(err);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nlet fs_ajax = function(url, data, login_url, before, complete, cb) {\r\n\tcb = arguments[arguments.length - 1]\r\n\tcomplete = arguments[arguments.length - 2]\r\n\tbefore = arguments[arguments.length - 3]\r\n\tAjax({\r\n\t\turl: url,\r\n\t\tdata: {data: JSON.stringify(data)},\r\n\t\tbeforeSend: function() {\r\n\t\t\tbefore();\r\n\t\t},\r\n\t\tcomplete: function() {\r\n\t\t\tcomplete();\r\n\t\t},\r\n\t\tsuccess: function(res) {\r\n\t\t\tif(res.result) {\r\n\t\t\t\tcb(res.data, res);\r\n\t\t\t} else {\r\n\t\t\t\tif(res.errorcode == null) {\r\n\t\t\t\t\talert(\"输出格式错误\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(res.errorcode == -1) {\r\n\t\t\t\t\talert(\"系统维护\");\r\n\t\t\t\t} else if (res.errorcode == -2 || res.errorcode == 1) {\r\n\t\t\t\t\tif(typeof login_url == \"string\") {\r\n\t\t\t\t\t\tfs_ajax(login_url, {url: location.href}, function(res) {\r\n\t\t\t\t\t\t\tlocation.href = res;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// alert(\"请先登陆\")\r\n\t\t\t\t\t\tcb(false, res);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (res.errorcode == 0) {\r\n\t\t\t\t\t// alert(res.data);\r\n\t\t\t\t\t\tcb(false, res);\r\n\t\t\t\t\t\r\n\t\t\t\t} else if (res.errorcode == 2) {\r\n\t\t\t\t\tcb(false, res);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcb(res.data, res);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: function(err) {\r\n\t\t\t// alert(err);\r\n\t\t\talert('网络错误，请稍后重试')\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexports.fs_ajax = fs_ajax;\r\nexports.get = get;\r\nexports.post = post;\r\n\r\n// //ajax基础配置\r\n// function AjaxConfig(){\r\n// \tthis.paramsConfig = {\r\n// \t\turl: '',\r\n// \t\tdata: {},\r\n// \t\tbeforeSend: function(){},\r\n// \t\tcomplete: function(){},\r\n// \t\terror: function(err){return err},\r\n// \t\tsuccess: function(res, response){}\r\n// \t};\r\n// \tthis.combineParams = function(config, params,callback){\r\n// \t\tfor(var key in params){\r\n// \t\t\tif(config.hasOwnProperty(key)){\r\n// \t\t\t\tconfig[key] = params[key];\r\n// \t\t\t}\r\n// \t\t}\r\n// \t\tcallback(config);\r\n// \t}\r\n// }\r\n\r\n// //get请求\r\n// function Get(options){\r\n// \tGet.fn.initRequest(options);\r\n// }\r\n// Get.fn = Get.prototype = {\r\n// \tinitRequest: function(options){\r\n// \t\tAjaxConfig.apply(this);\r\n// \t\tthis.combineParams(this.paramsConfig, options, function(config){\r\n// \t\t\tAjax(config);\r\n// \t\t});\r\n// \t}\r\n// }\r\n\r\n// //post请求\r\n// function Post(options){\r\n// \tPost.fn.initRequest(options);\r\n// }\r\n// Post.fn = Post.prototype = {\r\n// \tinitRequest: function(options){\r\n// \t\tAjaxConfig.apply(this);\r\n// \t\tthis.combineParams(this.paramsConfig, options, function(config){\r\n// \t\t\tAjax(config);\r\n// \t\t});\r\n// \t}\r\n// }\r\n\r\n// //ajax请求数据并做相应的数据回调信息处理\r\n// function fsAjax(options){\r\n// \tfsAjax.fn.initRequest(options);\r\n// }\r\n// fsAjax.fn = fsAjax.prototype = {\r\n// \tinitRequest: function(params){\r\n// \t\tAjaxConfig.apply(this);\r\n// \t\tthis.combineParams(this.paramsConfig, params, function(config){\r\n// \t\t\tAjax({\r\n// \t\t\t\turl: config.url,\r\n// \t\t\t\tdata: config.data,\r\n// \t\t\t\tbeforeSend: config.beforeSend,\r\n// \t\t\t\tcomplete: config.complete,\r\n// \t\t\t\terror: config.error,\r\n// \t\t\t\tsuccess: function(res){\r\n// \t\t\t\t\tif(res.result){\r\n// \t\t\t\t\t\tconfig.success(res.data, res);\r\n// \t\t\t\t\t}else{\r\n// \t\t\t\t\t\tif(res.errorcode == null){\r\n// \t\t\t\t\t\t\tconfig.error('输出格式错误');\r\n// \t\t\t\t\t\t\treturn;\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t\tif(res.errorcode == -1){\r\n// \t\t\t\t\t\t\tconfig.error('系统维护');\r\n// \t\t\t\t\t\t\treturn;\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t\tif(res.errorcode == 0){\r\n// \t\t\t\t\t\t\tconfig.error(res.data);\r\n// \t\t\t\t\t\t\treturn;\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t\tif(res.errorcode == 2){\r\n// \t\t\t\t\t\t\tconfig.success(false, res);\r\n// \t\t\t\t\t\t\treturn;\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t\tconfig.success(res.data, res);\r\n// \t\t\t\t\t}\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n// \t\t});\r\n// \t}\r\n// }\r\n\r\n// exports.get = Get;\r\n// exports.post = Post;\r\n// exports.fs_ajax = fsAjax;"]}